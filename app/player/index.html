<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0b0b" />
  <title>MaxSkins ‚Äî Player Screen</title>

  <!-- MAXSKINS_PLAYER_INDEX_PROD_V6_RAILS | 2026-02-14 03:23
       Fingerprint: PLAYER::V6_RAILS
       Notes: Restores 4 vertical rails (Fairway/Sand/Green/Putts). Removes floating logo + game indicator pills.
  -->

  <link rel="icon" href="/assets/img/MSG_Logo.png" />

  <style>
    /* ---------------------------
       MaxSkins Player Screen (PROD V6_RAILS)
       Goal: deterministic layout, no "ghost" UI
    ---------------------------- */

    :root {
      --bg: #0b0b0b;
      --panel: rgba(255,255,255,0.06);
      --panel2: rgba(255,255,255,0.08);
      --stroke: rgba(255,255,255,0.12);
      --stroke2: rgba(255,255,255,0.18);
      --gold: #d9b45e;
      --gold2: #a8843d;
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.60);
      --shadow: 0 18px 60px rgba(0,0,0,0.55);

      --radius: 22px;
      --radiusSm: 14px;

      --isoW: 390px;
      --isoH: 844px;
    }

    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: var(--bg);
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      overflow: hidden;
    }

    /* Center + scale the deterministic phone canvas */
    body {
      display: flex;
      align-items: flex-start;
      justify-content: center;
      padding: 16px 10px;
      box-sizing: border-box;
    }

    #msIsoStage {
      width: var(--isoW);
      height: var(--isoH);
      border-radius: 30px;
      box-shadow: var(--shadow);
      background:
        radial-gradient(120% 60% at 50% 0%, rgba(217,180,94,0.10), rgba(0,0,0,0) 60%),
        radial-gradient(120% 60% at 50% 110%, rgba(14, 110, 74, 0.12), rgba(0,0,0,0) 60%),
        linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.0));
      border: 1px solid rgba(255,255,255,0.10);
      position: relative;
      transform-origin: top center;
      transform: scale(var(--msScale, 1));
    }

    @media (max-width: 420px) {
      #msIsoStage {
        --msScale: calc((100vw - 20px) / 390);
      }
    }

    @media (max-height: 900px) {
      #msIsoStage {
        --msScale: min(var(--msScale, 1), calc((100vh - 28px) / 844));
      }
    }

    /* Safe-area padding wrapper */
    .screen {
      position: absolute;
      inset: 0;
      padding: 14px 14px calc(14px + env(safe-area-inset-bottom)) 14px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    /* Top brand bar */
    .topBar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 18px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.10);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 0;
    }

    .brand img {
      height: 38px;        /* SHRUNK to fit properly */
      width: auto;
      display: block;
      filter: drop-shadow(0 6px 16px rgba(0,0,0,0.55));
    }

    .brandText {
      display: flex;
      flex-direction: column;
      line-height: 1.05;
      min-width: 0;
    }

    .brandText .title {
      font-weight: 800;
      letter-spacing: 0.8px;
      color: rgba(255,255,255,0.92);
      font-size: 12px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .brandText .sub {
      font-size: 11px;
      color: rgba(255,255,255,0.62);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .pillTag {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(14,110,74,0.20);
      border: 1px solid rgba(14,110,74,0.40);
      color: rgba(255,255,255,0.92);
      font-weight: 800;
      letter-spacing: 0.6px;
      font-size: 11px;
    }

    /* Hole header */
    .holeRow {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: center;
    }

    .holeBadge {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.10);
      font-weight: 800;
      letter-spacing: 0.8px;
      font-size: 12px;
    }

    .miniInfo {
      font-size: 11px;
      color: rgba(255,255,255,0.55);
      padding: 10px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.10);
    }

    /* Honors bar */
    .honors {
      padding: 10px 12px;
      border-radius: 16px;
      text-align: center;
      font-weight: 900;
      letter-spacing: 1.2px;
      font-size: 12px;
      color: rgba(255,255,255,0.90);
      background: linear-gradient(180deg, rgba(217,180,94,0.12), rgba(255,255,255,0.02));
      border: 1px solid rgba(217,180,94,0.22);
    }

    /* Player row */
    .playerRow {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: center;
      padding: 12px;
      border-radius: 18px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.10);
    }

    .playerName {
      font-size: 18px;
      font-weight: 900;
      letter-spacing: 0.3px;
      line-height: 1.05;
    }

    .scoreStepper {
      display: inline-grid;
      grid-template-columns: 42px 44px 42px;
      gap: 8px;
      align-items: center;
    }

    .stepBtn, .scoreBox {
      height: 44px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.03);
      color: rgba(255,255,255,0.92);
      font-weight: 900;
      font-size: 18px;
    }

    .stepBtn {
      cursor: pointer;
    }

    .stepBtn:active {
      transform: translateY(1px);
    }

    .scoreBox {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* 4-rail area */
    .rails {
      flex: 1;
      min-height: 360px;
      padding: 12px;
      border-radius: 22px;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.10);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .railsGrid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      align-items: end;
    }

    .rail {
      height: 240px;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.0));
      border: 1px solid rgba(255,255,255,0.10);
      position: relative;
      overflow: hidden;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.35);
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 10px;
      box-sizing: border-box;
      cursor: pointer;
      user-select: none;
    }

    .rail::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(70% 50% at 50% 0%, rgba(217,180,94,0.10), rgba(0,0,0,0) 62%),
        radial-gradient(70% 50% at 50% 110%, rgba(14,110,74,0.10), rgba(0,0,0,0) 62%);
      opacity: 0.9;
      pointer-events: none;
    }

    .railInner {
      position: relative;
      height: 100%;
      width: 100%;
      border-radius: 14px;
      background: rgba(0,0,0,0.18);
      border: 1px solid rgba(255,255,255,0.08);
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .railIcon {
      width: 46px;
      height: 46px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.04);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      letter-spacing: 0.8px;
      font-size: 16px;
      position: relative;
    }

    .railLabel {
      margin-top: 10px;
      text-align: center;
      font-size: 12px;
      font-weight: 900;
      letter-spacing: 0.6px;
      color: rgba(255,255,255,0.88);
    }

    /* Active rings */
    .rail.active {
      border-color: rgba(217,180,94,0.30);
      box-shadow:
        inset 0 0 0 1px rgba(217,180,94,0.12),
        0 10px 26px rgba(0,0,0,0.55);
    }

    .rail.active .railIcon {
      border-color: rgba(217,180,94,0.40);
      box-shadow: 0 0 0 2px rgba(217,180,94,0.16);
    }

    /* Putts status colors */
    .putts1 .railIcon { box-shadow: 0 0 0 2px rgba(217,180,94,0.22); }
    .putts2 .railIcon { box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.22); }
    .putts3 .railIcon { box-shadow: 0 0 0 2px rgba(231, 76, 60, 0.24); }

    /* Second row: small actions */
    .actionsRow {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      align-items: center;
    }

    .miniBtn {
      height: 74px;
      border-radius: 18px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.10);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 6px;
      cursor: pointer;
      user-select: none;
    }

    .miniBtn .miniIcon {
      width: 36px;
      height: 36px;
      border-radius: 14px;
      background: rgba(0,0,0,0.18);
      border: 1px solid rgba(255,255,255,0.10);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      font-size: 14px;
    }

    .miniBtn .miniLabel {
      font-size: 11px;
      font-weight: 900;
      letter-spacing: 0.6px;
      color: rgba(255,255,255,0.85);
      text-align: center;
      line-height: 1.05;
    }

    .miniBtn:active {
      transform: translateY(1px);
    }

    /* Submit */
    .submitWrap {
      padding-top: 2px;
    }

    .submitBtn {
      width: 100%;
      height: 54px;
      border-radius: 999px;
      border: 1px solid rgba(217,180,94,0.26);
      background: linear-gradient(180deg, rgba(217,180,94,0.14), rgba(255,255,255,0.03));
      color: rgba(255,255,255,0.92);
      font-weight: 950;
      letter-spacing: 1px;
      cursor: pointer;
    }

    .submitBtn:active {
      transform: translateY(1px);
    }

    .helper {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      font-size: 10px;
      color: rgba(255,255,255,0.56);
      padding: 2px 4px 0 4px;
    }

    /* Bottom nav */
    .bottomNav {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      padding: 10px 10px 8px 10px;
      border-radius: 20px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.10);
    }

    .navBtn {
      height: 52px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.18);
      color: rgba(255,255,255,0.88);
      font-weight: 900;
      letter-spacing: 0.6px;
      font-size: 11px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }

    .navBtn.active {
      border-color: rgba(14,110,74,0.42);
      background: rgba(14,110,74,0.16);
      box-shadow: 0 0 0 2px rgba(14,110,74,0.10);
    }

    .navIcon {
      font-size: 14px;
      line-height: 1;
    }

    /* Tiny dev label (non-intrusive) */
    .devTag {
      position: absolute;
      right: 12px;
      top: 12px;
      font-size: 10px;
      color: rgba(255,255,255,0.35);
      letter-spacing: 0.6px;
      pointer-events: none;
    }
  </style>
</head>

<body>
  <div id="msIsoStage" data-ms-player="1">
    <div class="devTag">PLAYER::V6_RAILS</div>

    <div class="screen" id="playerScreen">
      <div class="topBar">
        <div class="brand" aria-label="MaxSkins brand">
          <img src="/assets/img/MSG_Logo.png" alt="MSG MaxSkins Golf" />
          <div class="brandText">
            <div class="title">MSG</div>
            <div class="sub">MaxSkins Golf ‚Äî Player</div>
          </div>
        </div>
        <div class="pillTag" aria-label="mode">PLAYER</div>
      </div>

      <div class="holeRow">
        <div class="holeBadge" aria-label="hole info">
          <span id="holeLabel">HOLE 6</span>
          <span id="parLabel">PAR 4</span>
        </div>
        <div class="miniInfo" aria-label="status">Round: 1/18</div>
      </div>

      <div class="honors" id="honorsBar">HONORS</div>

      <div class="playerRow" aria-label="player row">
        <div class="playerName" id="playerName">John Smith</div>

        <div class="scoreStepper" aria-label="score stepper">
          <button class="stepBtn" id="scoreMinus" type="button" aria-label="minus">‚àí</button>
          <div class="scoreBox" id="scoreValue" aria-label="score">4</div>
          <button class="stepBtn" id="scorePlus" type="button" aria-label="plus">+</button>
        </div>
      </div>

      <div class="rails" aria-label="player stats">
        <div class="railsGrid">
          <div class="rail" id="railFairway" role="button" tabindex="0" aria-label="Fairway">
            <div class="railInner">
              <div class="railIcon">‚õ≥</div>
            </div>
            <div class="railLabel">Fairway</div>
          </div>

          <div class="rail" id="railSand" role="button" tabindex="0" aria-label="Sand">
            <div class="railInner">
              <div class="railIcon">‚ñ¶</div>
            </div>
            <div class="railLabel">Sand</div>
          </div>

          <div class="rail" id="railGreen" role="button" tabindex="0" aria-label="Green">
            <div class="railInner">
              <div class="railIcon">‚óè</div>
            </div>
            <div class="railLabel">Green</div>
          </div>

          <div class="rail" id="railPutts" role="button" tabindex="0" aria-label="Putts">
            <div class="railInner">
              <div class="railIcon">üèÅ</div>
            </div>
            <div class="railLabel">Putts</div>
          </div>
        </div>

        <div class="actionsRow" aria-label="actions">
          <div class="miniBtn" id="btnPenalty" role="button" tabindex="0" aria-label="Penalty">
            <div class="miniIcon">+1</div>
            <div class="miniLabel">Penalty</div>
          </div>

          <div class="miniBtn" id="btnNotes" role="button" tabindex="0" aria-label="Notes">
            <div class="miniIcon">üéô</div>
            <div class="miniLabel">Notes</div>
          </div>

          <div class="miniBtn" id="btnFairwayAI" role="button" tabindex="0" aria-label="Fairway AI">
            <div class="miniIcon">üéØ</div>
            <div class="miniLabel">Fairway<br/>AI</div>
          </div>

          <div class="miniBtn" id="btnGreenAI" role="button" tabindex="0" aria-label="Green AI">
            <div class="miniIcon">‚ñ£</div>
            <div class="miniLabel">Green<br/>AI</div>
          </div>
        </div>

        <div class="submitWrap">
          <button class="submitBtn" id="btnSubmit" type="button">SUBMIT SCORE</button>
          <div class="helper">
            <div>Tap Fairway / Sand / Green to toggle.</div>
            <div>Putts cycles 0‚Üí1‚Üí2‚Üí3+ (hold 1s = reset).</div>
          </div>
        </div>
      </div>

      <div class="bottomNav" aria-label="bottom navigation">
        <button class="navBtn active" id="navHome" type="button"><div class="navIcon">üè†</div>HOME</button>
        <button class="navBtn" id="navScores" type="button"><div class="navIcon">üìä</div>SCORES</button>
        <button class="navBtn" id="navRules" type="button"><div class="navIcon">üìú</div>RULES</button>
        <button class="navBtn" id="navMoney" type="button"><div class="navIcon">üí∞</div>MONEY</button>
      </div>
    </div>
  </div>

  <script>
    // -----------------------------
    // MaxSkins Player Screen (PROD V6_RAILS)
    // Fingerprint: PLAYER::V6_RAILS
    // -----------------------------

    // Score stepper (visual only for now)
    (function() {
      const scoreEl = document.getElementById('scoreValue');
      const minus = document.getElementById('scoreMinus');
      const plus  = document.getElementById('scorePlus');

      function getScore() {
        const n = parseInt(scoreEl.textContent || '0', 10);
        return Number.isFinite(n) ? n : 0;
      }
      function setScore(n) {
        scoreEl.textContent = String(Math.max(0, n));
      }

      minus.addEventListener('click', () => setScore(getScore() - 1));
      plus.addEventListener('click', () => setScore(getScore() + 1));
    })();

    // Rail toggles
    (function() {
      const railFairway = document.getElementById('railFairway');
      const railSand    = document.getElementById('railSand');
      const railGreen   = document.getElementById('railGreen');
      const railPutts   = document.getElementById('railPutts');

      // Non-exclusive: Fairway/Sand/Green can all be active simultaneously
      function toggleActive(el) {
        el.classList.toggle('active');
      }

      function keyAsClick(el) {
        el.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            el.click();
          }
        });
      }

      railFairway.addEventListener('click', () => toggleActive(railFairway));
      railSand.addEventListener('click', () => toggleActive(railSand));
      railGreen.addEventListener('click', () => toggleActive(railGreen));
      keyAsClick(railFairway); keyAsClick(railSand); keyAsClick(railGreen);

      // Putts behavior:
      //   default each hole = 0 (no ring)
      //   1 putt = gold ring
      //   2 putts = green ring
      //   3+ putts = red ring
      // Hold 1s to reset back to 0.
      let putts = 0;
      let holdTimer = null;

      function renderPutts() {
        railPutts.classList.toggle('active', putts > 0);
        railPutts.classList.remove('putts1','putts2','putts3');
        if (putts === 1) railPutts.classList.add('putts1');
        else if (putts === 2) railPutts.classList.add('putts2');
        else if (putts >= 3) railPutts.classList.add('putts3');
      }

      function cyclePutts() {
        putts = (putts >= 3) ? 0 : (putts + 1);
        renderPutts();
      }

      function resetPutts() {
        putts = 0;
        renderPutts();
      }

      railPutts.addEventListener('click', () => {
        // ignore click if long-press already fired
        if (railPutts.dataset.longpress === '1') {
          railPutts.dataset.longpress = '0';
          return;
        }
        cyclePutts();
      });

      const startHold = () => {
        clearTimeout(holdTimer);
        holdTimer = setTimeout(() => {
          railPutts.dataset.longpress = '1';
          resetPutts();
        }, 900);
      };
      const endHold = () => {
        clearTimeout(holdTimer);
      };

      railPutts.addEventListener('mousedown', startHold);
      railPutts.addEventListener('mouseup', endHold);
      railPutts.addEventListener('mouseleave', endHold);

      railPutts.addEventListener('touchstart', startHold, {passive:true});
      railPutts.addEventListener('touchend', endHold);
      railPutts.addEventListener('touchcancel', endHold);

      keyAsClick(railPutts);
      renderPutts();

      // Mini buttons (placeholders)
      const btnPenalty = document.getElementById('btnPenalty');
      const btnNotes = document.getElementById('btnNotes');
      const btnFairwayAI = document.getElementById('btnFairwayAI');
      const btnGreenAI = document.getElementById('btnGreenAI');

      [btnPenalty, btnNotes, btnFairwayAI, btnGreenAI].forEach((el) => {
        el.addEventListener('click', () => {
          // Placeholder for later wiring
          // Keep minimal, no modal spam.
          el.style.filter = 'brightness(1.12)';
          setTimeout(() => el.style.filter = '', 140);
        });
        keyAsClick(el);
      });

      // Submit (two-tap confirm style but lightweight)
      const submit = document.getElementById('btnSubmit');
      let armed = false;
      let armTimer = null;

      function disarm() {
        armed = false;
        submit.textContent = 'SUBMIT SCORE';
        submit.style.borderColor = 'rgba(217,180,94,0.26)';
      }

      submit.addEventListener('click', () => {
        if (!armed) {
          armed = true;
          submit.textContent = 'CONFIRM';
          submit.style.borderColor = 'rgba(14,110,74,0.55)';
          clearTimeout(armTimer);
          armTimer = setTimeout(disarm, 3500);
          return;
        }
        disarm();
        // TODO: wire to scorekeeper
        alert('Sent to scorekeeper (wire later).');
      });

      // Bottom nav: visual active state only
      const navIds = ['navHome','navScores','navRules','navMoney'];
      const navBtns = navIds.map(id => document.getElementById(id)).filter(Boolean);
      navBtns.forEach((b) => {
        b.addEventListener('click', () => {
          navBtns.forEach(x => x.classList.toggle('active', x === b));
        });
      });
    })();
  </script>

  <!-- Keep canonical helper JS for nav highlighting etc if you want it site-wide -->
  <script src="/assets/js/main.js"></script>
</body>
</html>
