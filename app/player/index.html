<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark" />
  <title>MaxSkins ‚Äî Player Screen</title>

  <!-- MAXSKINS PLAYER ‚Äî PROD V5 FRESH (2026-02-13) -->
  <!-- Fingerprint: PLAYER_V5_FRESH_20260213_01 -->

  <style>
    /* --- Reset / base --- */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      background:#0b0b0b;
      color:#e9e9e9;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      padding:12px 10px 18px;
      overflow-x:hidden;
    }

    /* Lock the UI into a phone canvas (matches your current pattern) */
    .msIsoStage{
      width:390px;
      min-height:844px;
      padding:14px 12px 16px;
      border-radius:22px;
      background:
        radial-gradient(120% 90% at 50% 0%, rgba(30,30,30,.9), rgba(10,10,10,.92) 55%, rgba(0,0,0,.95));
      box-shadow: 0 18px 60px rgba(0,0,0,.65), inset 0 0 0 1px rgba(255,255,255,.06);
      position:relative;
    }

    /* Tiny visible fingerprint (for ‚Äúwhy am I still seeing old?‚Äù) */
    .buildTag{
      position:absolute;
      top:10px;
      right:12px;
      font-size:10px;
      letter-spacing:.12em;
      opacity:.5;
      user-select:none;
      pointer-events:none;
    }

    /* Brand header */
    .brand{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:10px 10px 8px;
      border-radius:16px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
    }
    .brandLeft{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .logoWrap{
      width:84px; /* shrunk so it fits clean */
      height:44px;
      border-radius:12px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.35);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
      overflow:hidden;
      flex:0 0 auto;
    }
    .logoWrap img{
      width:100%;
      height:100%;
      object-fit:contain;
      transform: translateY(1px);
    }
    .brandText{
      min-width:0;
      line-height:1.05;
    }
    .brandText .title{
      font-weight:800;
      letter-spacing:.08em;
      font-size:18px;
      color:#d8b96a;
      text-shadow: 0 2px 10px rgba(0,0,0,.65);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .brandText .sub{
      font-size:11px;
      opacity:.75;
      letter-spacing:.06em;
      margin-top:4px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .badge{
      flex:0 0 auto;
      font-size:11px;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(20,80,40,.22);
      color:#b8f0c9;
      box-shadow: inset 0 0 0 1px rgba(80,200,120,.22);
      letter-spacing:.08em;
      font-weight:700;
    }

    /* Hole row */
    .holeRow{
      margin-top:10px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }
    .pill{
      border-radius:999px;
      padding:8px 12px;
      background: rgba(255,255,255,.05);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
      font-size:12px;
      letter-spacing:.08em;
      font-weight:800;
    }
    .pill strong{color:#d8b96a}
    .pillSmall{
      padding:8px 10px;
      min-width:92px;
      text-align:center;
    }

    /* Honors */
    .honors{
      margin-top:10px;
      display:flex;
      justify-content:center;
    }
    .honorsBtn{
      width:100%;
      border:0;
      background: rgba(0,0,0,.35);
      color:#e7e7e7;
      font-weight:800;
      letter-spacing:.14em;
      padding:10px 12px;
      border-radius:999px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
      cursor:pointer;
    }
    .honorsBtn.on{
      background: rgba(40,120,70,.26);
      box-shadow: inset 0 0 0 1px rgba(120,240,170,.22), 0 10px 25px rgba(0,0,0,.35);
    }

    /* Player row + score */
    .playerCard{
      margin-top:12px;
      border-radius:18px;
      padding:12px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
    }
    .nameRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .playerName{
      font-size:18px;
      font-weight:900;
      letter-spacing:.02em;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .scoreStepper{
      display:flex;
      align-items:center;
      gap:10px;
      flex:0 0 auto;
    }
    .stepBtn{
      width:42px;height:36px;
      border-radius:10px;
      border:0;
      cursor:pointer;
      background: rgba(255,255,255,.06);
      color:#eaeaea;
      font-weight:900;
      font-size:18px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
    }
    .stepBtn:active{transform:translateY(1px)}
    .scoreVal{
      min-width:26px;
      text-align:center;
      font-weight:900;
      font-size:18px;
      letter-spacing:.08em;
      opacity:.95;
    }
    .scoreVal.blank{opacity:.35}
    .scoreVal.locked{color:#d8b96a}

    /* Actions grid */
    .grid{
      margin-top:12px;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
    }
    .bigBtn{
      height:88px;
      border-radius:16px;
      border:0;
      background: rgba(255,255,255,.05);
      color:#eaeaea;
      font-weight:900;
      letter-spacing:.02em;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.07);
      cursor:pointer;
      position:relative;
      overflow:hidden;
    }
    .bigBtn .label{
      position:absolute;
      left:10px; right:10px;
      bottom:10px;
      font-size:12px;
      letter-spacing:.08em;
      opacity:.9;
      text-align:center;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .bigBtn .icon{
      position:absolute;
      top:16px;
      left:50%;
      transform:translateX(-50%);
      opacity:.9;
      font-size:18px;
      font-weight:900;
    }
    .bigBtn.on{
      background: rgba(40,120,70,.25);
      box-shadow: inset 0 0 0 1px rgba(120,240,170,.22), 0 14px 28px rgba(0,0,0,.35);
    }
    .bigBtn.warn{
      background: rgba(150,40,40,.22);
      box-shadow: inset 0 0 0 1px rgba(255,120,120,.18), 0 14px 28px rgba(0,0,0,.35);
    }
    .bigBtn.ai{
      background: rgba(80,80,80,.14);
    }

    /* Submit */
    .submitWrap{
      margin-top:12px;
      display:flex;
      justify-content:center;
    }
    .submitBtn{
      width:100%;
      border:0;
      border-radius:999px;
      padding:12px 14px;
      font-weight:1000;
      letter-spacing:.12em;
      background: rgba(255,255,255,.06);
      color:#f0f0f0;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
      cursor:pointer;
    }
    .submitBtn.armed{
      background: rgba(40,120,70,.26);
      box-shadow: inset 0 0 0 1px rgba(120,240,170,.22), 0 16px 35px rgba(0,0,0,.35);
    }

    /* Help text */
    .help{
      margin-top:10px;
      font-size:11px;
      opacity:.7;
      line-height:1.25;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .chip{
      font-size:10px;
      padding:4px 8px;
      border-radius:999px;
      background: rgba(255,255,255,.06);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.07);
      letter-spacing:.06em;
      opacity:.9;
    }

    /* Bottom nav */
    .nav{
      position:sticky;
      bottom:0;
      margin-top:14px;
      padding-top:12px;
    }
    .navInner{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
      padding:10px;
      border-radius:18px;
      background: rgba(255,255,255,.04);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
    }
    .navBtn{
      border:0;
      border-radius:12px;
      padding:10px 8px;
      font-size:11px;
      letter-spacing:.12em;
      font-weight:900;
      background: rgba(0,0,0,.35);
      color:#eaeaea;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
      cursor:pointer;
      display:flex;
      flex-direction:column;
      gap:6px;
      align-items:center;
      justify-content:center;
    }
    .navBtn .ico{font-size:14px; opacity:.9}
    .navBtn.active{
      background: rgba(40,120,70,.20);
      box-shadow: inset 0 0 0 1px rgba(120,240,170,.18);
    }

    /* Mobile scale helper (keeps it sane on smaller viewports) */
    @media (max-width: 410px){
      .msIsoStage{ transform: scale(.98); transform-origin: top center; }
    }
  </style>
</head>

<body>
  <div class="msIsoStage" data-ms-player="1">
    <div class="buildTag">PLAYER_V5_FRESH</div>

    <header class="brand">
      <div class="brandLeft">
        <div class="logoWrap" aria-label="MaxSkins logo">
          <img src="/assets/img/MSG_LOGO.png" alt="MSG" />
        </div>
        <div class="brandText">
          <div class="title">MSG</div>
          <div class="sub">MaxSkins Golf ‚Ä¢ Player</div>
        </div>
      </div>
      <div class="badge" id="phaseBadge">PLAYER</div>
    </header>

    <div class="holeRow">
      <div class="pill pillSmall"><strong>HOLE</strong> <span id="holeNum">6</span></div>
      <div class="pill pillSmall"><strong>PAR</strong> <span id="holePar">4</span></div>
    </div>

    <div class="honors">
      <button class="honorsBtn" id="btnHonors" type="button">HONORS</button>
    </div>

    <section class="playerCard">
      <div class="nameRow">
        <div class="playerName" id="playerName">John Smith</div>
        <div class="scoreStepper">
          <button class="stepBtn" id="btnMinus" type="button" aria-label="Minus">‚àí</button>
          <div class="scoreVal blank" id="scoreVal">‚Äî</div>
          <button class="stepBtn" id="btnPlus" type="button" aria-label="Plus">+</button>
        </div>
      </div>

      <div class="grid" aria-label="Player stats">
        <button class="bigBtn" id="btnFairway" type="button" aria-pressed="false">
          <div class="icon">‚õ≥</div><div class="label">Fairway</div>
        </button>
        <button class="bigBtn" id="btnSand" type="button" aria-pressed="false">
          <div class="icon">‚ñß</div><div class="label">Sand</div>
        </button>
        <button class="bigBtn" id="btnGreen" type="button" aria-pressed="false">
          <div class="icon">‚óè</div><div class="label">Green</div>
        </button>
        <button class="bigBtn" id="btnPutts" type="button" aria-pressed="false">
          <div class="icon" id="puttsIcon">‚öë</div><div class="label">Putts</div>
        </button>

        <button class="bigBtn" id="btnPenalty" type="button">
          <div class="icon">+1</div><div class="label">Penalty</div>
        </button>
        <button class="bigBtn" id="btnNotes" type="button">
          <div class="icon">üé§</div><div class="label">Notes</div>
        </button>
        <button class="bigBtn ai" id="btnFairwayAI" type="button">
          <div class="icon">üéØ</div><div class="label">Fairway AI</div>
        </button>
        <button class="bigBtn ai" id="btnGreenAI" type="button">
          <div class="icon">üü©</div><div class="label">Green AI</div>
        </button>
      </div>

      <div class="submitWrap">
        <button class="submitBtn" id="btnSubmit" type="button">SUBMIT SCORE</button>
      </div>

      <div class="help">
        <span class="chip">Tap</span> Fairway / Sand / Green toggles.
        <span class="chip">Tap</span> Putts cycles 0‚Äì9 (3+ shows red). <span class="chip">Hold 1s</span> resets Putts.
        <span class="chip">Rule</span> Score shows <b>‚Äî</b> until submitted (never 0).
      </div>
    </section>

    <nav class="nav" aria-label="Bottom navigation">
      <div class="navInner">
        <button class="navBtn active" id="navHome" type="button"><div class="ico">üè†</div>HOME</button>
        <button class="navBtn" id="navScores" type="button"><div class="ico">üìä</div>SCORES</button>
        <button class="navBtn" id="navRules" type="button"><div class="ico">‚öñÔ∏è</div>RULES</button>
        <button class="navBtn" id="navMoney" type="button"><div class="ico">üí∞</div>MONEY</button>
      </div>
    </nav>
  </div>

  <script>
    // ----------------------------
    // Player Screen V5 Fresh Logic
    // ----------------------------
    const $ = (id) => document.getElementById(id);

    const state = {
      honors: false,
      fairway: false,
      sand: false,
      green: false,
      putts: null,          // null = not set (shows "‚Äî" on submit summary)
      penalty: 0,
      score: null,          // null = blank (shows "‚Äî" in UI)
      submitted: false,
      submitArmed: false,
    };

    function setPressed(btnId, on){
      const el = $(btnId);
      el.classList.toggle('on', !!on);
      el.setAttribute('aria-pressed', !!on);
    }

    function renderScore(){
      const el = $('scoreVal');
      const isBlank = (state.score === null);
      el.classList.toggle('blank', isBlank);
      el.textContent = isBlank ? '‚Äî' : String(state.score);
      el.classList.toggle('locked', state.submitted);
    }

    function cyclePutts(){
      // Putts cycle: null -> 0 -> 1 -> ... -> 9 -> null
      if (state.putts === null) state.putts = 0;
      else if (state.putts >= 9) state.putts = null;
      else state.putts += 1;

      // Visual rule: 3+ shows red
      const btn = $('btnPutts');
      btn.classList.toggle('warn', (state.putts !== null && state.putts >= 3));
      // Flag icon subtle state cue
      $('puttsIcon').textContent = (state.putts === null) ? '‚öë' : String(state.putts);
      btn.querySelector('.label').textContent = (state.putts === null) ? 'Putts' : `Putts: ${state.putts}`;
    }

    function resetPutts(){
      state.putts = null;
      const btn = $('btnPutts');
      btn.classList.remove('warn');
      $('puttsIcon').textContent = '‚öë';
      btn.querySelector('.label').textContent = 'Putts';
    }

    function disarmSubmit(){
      state.submitArmed = false;
      const btn = $('btnSubmit');
      btn.classList.remove('armed');
      btn.textContent = 'SUBMIT SCORE';
    }

    function armSubmit(){
      state.submitArmed = true;
      const btn = $('btnSubmit');
      btn.classList.add('armed');
      btn.textContent = 'CONFIRM';
      // Auto-disarm
      window.clearTimeout(armSubmit._t);
      armSubmit._t = window.setTimeout(disarmSubmit, 3500);
    }

    // Honors
    $('btnHonors').addEventListener('click', () => {
      state.honors = !state.honors;
      $('btnHonors').classList.toggle('on', state.honors);
    });

    // Score stepper ‚Äî IMPORTANT: no zero shown by default
    $('btnMinus').addEventListener('click', () => {
      if (state.submitted) return;
      if (state.score === null) state.score = 1; // first touch becomes 1 (not 0)
      else state.score = Math.max(1, state.score - 1);
      renderScore();
      disarmSubmit();
    });
    $('btnPlus').addEventListener('click', () => {
      if (state.submitted) return;
      if (state.score === null) state.score = 1;
      else state.score = Math.min(30, state.score + 1);
      renderScore();
      disarmSubmit();
    });

    // Toggles (non-exclusive)
    $('btnFairway').addEventListener('click', () => { if(state.submitted) return; state.fairway=!state.fairway; setPressed('btnFairway', state.fairway); disarmSubmit();});
    $('btnSand').addEventListener('click', () => { if(state.submitted) return; state.sand=!state.sand; setPressed('btnSand', state.sand); disarmSubmit();});
    $('btnGreen').addEventListener('click', () => { if(state.submitted) return; state.green=!state.green; setPressed('btnGreen', state.green); disarmSubmit();});

    // Putts: tap cycles, hold resets
    let puttsHoldTimer = null;
    $('btnPutts').addEventListener('pointerdown', () => {
      if (state.submitted) return;
      puttsHoldTimer = window.setTimeout(() => {
        resetPutts();
        puttsHoldTimer = null;
        disarmSubmit();
      }, 900);
    });
    $('btnPutts').addEventListener('pointerup', () => {
      if (state.submitted) return;
      if (puttsHoldTimer){
        window.clearTimeout(puttsHoldTimer);
        puttsHoldTimer = null;
        cyclePutts();
        disarmSubmit();
      }
    });
    $('btnPutts').addEventListener('pointerleave', () => {
      if (puttsHoldTimer){
        window.clearTimeout(puttsHoldTimer);
        puttsHoldTimer = null;
      }
    });

    // Penalty: increments, long-press to reset
    let penHold = null;
    $('btnPenalty').addEventListener('pointerdown', () => {
      if (state.submitted) return;
      penHold = window.setTimeout(() => {
        state.penalty = 0;
        $('btnPenalty').querySelector('.icon').textContent = '+1';
        $('btnPenalty').querySelector('.label').textContent = 'Penalty';
        penHold = null;
        disarmSubmit();
      }, 900);
    });
    $('btnPenalty').addEventListener('pointerup', () => {
      if (state.submitted) return;
      if (penHold){
        window.clearTimeout(penHold);
        penHold = null;
        state.penalty = Math.min(9, state.penalty + 1);
        $('btnPenalty').querySelector('.icon').textContent = `+${state.penalty}`;
        $('btnPenalty').querySelector('.label').textContent = (state.penalty === 0) ? 'Penalty' : `Penalty: ${state.penalty}`;
        disarmSubmit();
      }
    });

    // Notes / AI placeholders (Phase 1 stubs)
    $('btnNotes').addEventListener('click', () => alert('Notes (Phase 1 stub)'));
    $('btnFairwayAI').addEventListener('click', () => alert('Fairway AI (Phase 1 stub)'));
    $('btnGreenAI').addEventListener('click', () => alert('Green AI (Phase 1 stub)'));

    // Submit: two-tap confirm. Locks the card locally.
    $('btnSubmit').addEventListener('click', () => {
      if (state.submitted) return;

      // Must have a score to submit
      if (state.score === null){
        alert('Enter your score first.');
        return;
      }

      if (!state.submitArmed){
        armSubmit();
        return;
      }

      // Confirmed
      disarmSubmit();
      state.submitted = true;
      $('btnSubmit').textContent = 'SUBMITTED';
      $('btnSubmit').classList.remove('armed');
      $('btnSubmit').style.opacity = '0.7';
      $('btnSubmit').style.cursor = 'default';
      renderScore();

      // In Phase 1: store in localStorage as a stand-in for real sync
      const payload = {
        hole: Number($('holeNum').textContent || 1),
        par: Number($('holePar').textContent || 4),
        score: state.score,
        honors: state.honors,
        fairway: state.fairway,
        sand: state.sand,
        green: state.green,
        putts: state.putts,
        penalty: state.penalty,
        ts: Date.now(),
        build: 'PLAYER_V5_FRESH_20260213_01'
      };
      try{
        const key = 'ms_player_lastSubmission';
        localStorage.setItem(key, JSON.stringify(payload));
      }catch(e){}
      alert('Score submitted (local stand-in).');
    });

    // Bottom nav stubs
    function setActive(id){
      ['navHome','navScores','navRules','navMoney'].forEach(x => $(x)?.classList.toggle('active', x===id));
    }
    $('navHome').addEventListener('click', () => setActive('navHome'));
    $('navScores').addEventListener('click', () => setActive('navScores'));
    $('navRules').addEventListener('click', () => setActive('navRules'));
    $('navMoney').addEventListener('click', () => setActive('navMoney'));

    // Initial render
    renderScore();
    resetPutts();
    setPressed('btnFairway', false);
    setPressed('btnSand', false);
    setPressed('btnGreen', false);
  </script>

  <!-- Keep your canonical helper JS if you want nav highlighting on the full site -->
  <script src="/assets/js/main.js"></script>
</body>
</html>
